

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Debugging using PDI &mdash; Tempest  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="License" href="../license.html" />
    <link rel="prev" title="Programming" href="../programming.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Tempest
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../pdi.html">What is PDI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pdi.html#the-component-in-the-mcu">The component in the MCU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pdi.html#the-instruction-set">The instruction set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#lds">LDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#ld">LD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#sts">STS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#st">ST</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#ldcs">LDCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#repeat">REPEAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#stcs">STCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#key">KEY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#size-rules">Size Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#pointer-rules">Pointer Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pdi.html#pdi-registers">PDI Registers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pdi.html#status-register">Status Register</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pdi.html#reset-register">Reset Register</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pdi.html#control-register">Control Register</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pdi.html#native-pdi-protocol">Native PDI protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pdi.html#jtag-pdi-protocol">JTAG-PDI protocol</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../memory.html">Memory Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming.html">Programming</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Debugging using PDI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initiating-a-debug-session">Initiating a debug session</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#put-the-processor-into-reset">Put the processor into reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#turn-the-debug-interface-on">Turn the debug interface on</a></li>
<li class="toctree-l3"><a class="reference internal" href="#take-the-reset-processor-and-put-it-in-debug-pause-state">Take the reset processor and put it in debug pause state</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-run-to-address">Set up run-to-address</a></li>
<li class="toctree-l3"><a class="reference internal" href="#single-step-debugging">Single-step debugging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#single-stepping">Single Stepping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../license.html#cc-by-sa-2-0">CC-BY-SA 2.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributors.html">Contributors</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tempest</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Debugging using PDI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/debugging/index.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="debugging-using-pdi">
<h1>Debugging using PDI<a class="headerlink" href="#debugging-using-pdi" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Debug has its own key value that must be sent to enable it. You can check if this needs doing by issuing <code class="docutils literal notranslate"><span class="pre">ldcs</span> <span class="pre">status</span></code> to the PDI processor.</p>
<p>The debug key uses the constant 0x3a212dd49f7c8121 to unlock the debug part of the controller.</p>
</div>
<div class="section" id="initiating-a-debug-session">
<h2>Initiating a debug session<a class="headerlink" href="#initiating-a-debug-session" title="Permalink to this headline">¶</a></h2>
<div class="section" id="put-the-processor-into-reset">
<h3>Put the processor into reset<a class="headerlink" href="#put-the-processor-into-reset" title="Permalink to this headline">¶</a></h3>
<div class="highlight-pdi notranslate"><div class="highlight"><pre><span></span>stcs reset 0x59
ldcs status
</pre></div>
</div>
</div>
<div class="section" id="turn-the-debug-interface-on">
<h3>Turn the debug interface on<a class="headerlink" href="#turn-the-debug-interface-on" title="Permalink to this headline">¶</a></h3>
<div class="highlight-pdi notranslate"><div class="highlight"><pre><span></span>key debug
ldcs status
</pre></div>
</div>
</div>
<div class="section" id="take-the-reset-processor-and-put-it-in-debug-pause-state">
<h3>Take the reset processor and put it in debug pause state<a class="headerlink" href="#take-the-reset-processor-and-put-it-in-debug-pause-state" title="Permalink to this headline">¶</a></h3>
<div class="highlight-pdi notranslate"><div class="highlight"><pre><span></span>stcs r4 1
ldcs r3
stcs reset 0x00
ldcs r3
ldcs r3
</pre></div>
</div>
<p>Writing bit 1 of r4 puts the processor into debug-based pause once reset is released
the first LDCS to r3 is used to verify that r3 is presently 0.
Once reset is released, r3 will initially be 0x14, which should be observed with the second LDCS.
Once debug setup is completed, r4 will then read as 0x04, which should be observed with the final LDCS.</p>
</div>
<div class="section" id="set-up-run-to-address">
<h3>Set up run-to-address<a class="headerlink" href="#set-up-run-to-address" title="Permalink to this headline">¶</a></h3>
<p>sts.u32 0x00000020 0x29 0x01 0x00 0x00
sts.u32 0x00000024 0x00 0x00 0x00 0x00
sts.u8 0x00000040 0x00
sts.u8 0x00000040 0x00
sts.u16 0x00000028 0x00 0x01
sts.u8 0x00000048 0x00</p>
</div>
<div class="section" id="single-step-debugging">
<h3>Single-step debugging<a class="headerlink" href="#single-step-debugging" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="single-stepping">
<h2>Single Stepping<a class="headerlink" href="#single-stepping" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../license.html" class="btn btn-neutral float-right" title="License" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../programming.html" class="btn btn-neutral float-left" title="Programming" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Tempest Contributors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>