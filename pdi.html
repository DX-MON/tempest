

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>What is PDI &mdash; Tempest  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Memory Map" href="memory.html" />
    <link rel="prev" title="Tempest JTAG-PDI RE project" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Tempest
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">What is PDI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-component-in-the-mcu">The component in the MCU</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-instruction-set">The instruction set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lds">LDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ld">LD</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sts">STS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#st">ST</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ldcs">LDCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#repeat">REPEAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stcs">STCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#key">KEY</a></li>
<li class="toctree-l3"><a class="reference internal" href="#size-rules">Size Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pointer-rules">Pointer Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pdi-registers">PDI Registers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#status-register">Status Register</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reset-register">Reset Register</a></li>
<li class="toctree-l4"><a class="reference internal" href="#control-register">Control Register</a></li>
<li class="toctree-l4"><a class="reference internal" href="#register-r3">Register r3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#register-r4">Register r4</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#native-pdi-protocol">Native PDI protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jtag-pdi-protocol">JTAG-PDI protocol</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="memory.html">Memory Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="programming.html">Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging/index.html">Debugging using PDI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="debugging/index.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging/index.html#initiating-a-debug-session">Initiating a debug session</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#put-the-processor-into-reset">Put the processor into reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#turn-the-debug-interface-on">Turn the debug interface on</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#take-the-reset-processor-and-put-it-in-debug-pause-state">Take the reset processor and put it in debug pause state</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#set-up-run-to-address">Set up run-to-address</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#single-step-debugging">Single-step debugging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugging/index.html#single-stepping">Single Stepping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="license.html#cc-by-sa-2-0">CC-BY-SA 2.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Tempest</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>What is PDI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/pdi.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="what-is-pdi">
<h1>What is PDI<a class="headerlink" href="#what-is-pdi" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-component-in-the-mcu">
<h2>The component in the MCU<a class="headerlink" href="#the-component-in-the-mcu" title="Permalink to this headline">¶</a></h2>
<p>What if I told you that PDI was more than just a meer communications protocol? What if I told you that it was a complex state machine, so complex in fact that it could nearly be mistaken for a processor.. Well, I would be telling the truth.</p>
</div>
<div class="section" id="the-instruction-set">
<h2>The instruction set<a class="headerlink" href="#the-instruction-set" title="Permalink to this headline">¶</a></h2>
<p>All values transmitted as part of instructions and their effects are transmitted in LSB-first (Little Endian) byte order.</p>
<div class="section" id="lds">
<h3>LDS<a class="headerlink" href="#lds" title="Permalink to this headline">¶</a></h3>
<p>The LDS instruction loads up to 4 bytes of data from a given direct address and sends it back to the host.
The opcode has the form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>A</p></td>
<td><p>A</p></td>
<td><p>B</p></td>
<td><p>B</p></td>
</tr>
</tbody>
</table>
<p>AA and BB follow the <a class="reference external" href="#size-rules">size rules</a> below</p>
</div>
<div class="section" id="ld">
<h3>LD<a class="headerlink" href="#ld" title="Permalink to this headline">¶</a></h3>
<p>The LD instruction loads up to 4 bytes of data from the address given by the internal indirect addressing <code class="docutils literal notranslate"><span class="pre">ptr</span></code> register which can only be read by this instruction.
The opcode has the form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>P</p></td>
<td><p>P</p></td>
<td><p>B</p></td>
<td><p>B</p></td>
</tr>
</tbody>
</table>
<p>PP defines an addressing form given by the <a class="reference external" href="#pointer-rules">pointer rules section</a> below.
BB follows the <a class="reference external" href="#size-rules">size rules section</a> below</p>
</div>
<div class="section" id="sts">
<h3>STS<a class="headerlink" href="#sts" title="Permalink to this headline">¶</a></h3>
<p>The STS instruction stores up to 4 bytes of data to a given direct address.
The opcode has the form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>A</p></td>
<td><p>A</p></td>
<td><p>B</p></td>
<td><p>B</p></td>
</tr>
</tbody>
</table>
<p>AA and BB follow the <a class="reference external" href="#size-rules">size rules</a> below</p>
</div>
<div class="section" id="st">
<h3>ST<a class="headerlink" href="#st" title="Permalink to this headline">¶</a></h3>
<p>The ST instruction stores up to 4 bytes of data to the address given by the internal indirect addressing <code class="docutils literal notranslate"><span class="pre">ptr</span></code> register which can only be directly written to by this instruction.
The opcode has the form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>P</p></td>
<td><p>P</p></td>
<td><p>B</p></td>
<td><p>B</p></td>
</tr>
</tbody>
</table>
<p>PP defines an addressing form given by the <a class="reference external" href="#pointer-rules">pointer rules section</a> below.
BB follows</p>
</div>
<div class="section" id="ldcs">
<h3>LDCS<a class="headerlink" href="#ldcs" title="Permalink to this headline">¶</a></h3>
<p>The LDCS instruction allows reading of the PDI internal registers. PDI uses a 16-register stackless “CPU” (it’s not a CPU but close enough for this). See <a class="reference external" href="#pdi-registers">PDI registers</a> below for more information on these registers.
They are encoded numerically in order in the bottom half of the instruction, which has the form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>R</p></td>
<td><p>R</p></td>
<td><p>R</p></td>
<td><p>R</p></td>
</tr>
</tbody>
</table>
<p>RRRR defines which register to read.</p>
</div>
<div class="section" id="repeat">
<h3>REPEAT<a class="headerlink" href="#repeat" title="Permalink to this headline">¶</a></h3>
<p>The REPEAT instruction specifies that the next instruction(!) is to be repeated N times after initial execution, where N is specified in the bytes following this instruction.
The opcode has the following form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>B</p></td>
<td><p>B</p></td>
</tr>
</tbody>
</table>
<p>BB follows the <a class="reference external" href="#size-rules">size rules section</a> below and specifies how many bytes follow this instruction to be 0-padded and loaded into the PDI repeat register</p>
</div>
<div class="section" id="stcs">
<h3>STCS<a class="headerlink" href="#stcs" title="Permalink to this headline">¶</a></h3>
<p>The STCS instruction allows writing to the PDI internal registsers. See <a class="reference external" href="#pdi-registers">PDI registers</a> below for more information on these registers.
They are encoded numerically inorder in the bottom half of the instruction, which has the form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>R</p></td>
<td><p>R</p></td>
<td><p>R</p></td>
<td><p>R</p></td>
</tr>
</tbody>
</table>
<p>RRRR defines which register to write.</p>
</div>
<div class="section" id="key">
<h3>KEY<a class="headerlink" href="#key" title="Permalink to this headline">¶</a></h3>
<p>The KEY instruction is used to unlock special functions of the PDI controller.
The opcode has the following form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>8</p></th>
<th class="head"><p>7</p></th>
<th class="head"><p>6</p></th>
<th class="head"><p>5</p></th>
<th class="head"><p>4</p></th>
<th class="head"><p>3</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>8 bytes follow the key instruction and provide a special unlocking value for the feature you wish to unlock.
There are two known key value constants which are:</p>
<ul class="simple">
<li><p>NVM - 0x1289ab45cdd888ff</p></li>
<li><p>Debug - 0x3a212dd49f7c8121</p></li>
</ul>
</div>
<div class="section" id="size-rules">
<h3>Size Rules<a class="headerlink" href="#size-rules" title="Permalink to this headline">¶</a></h3>
<p>There are two size types (A and B) in the official protocol documentation.. however, they’re identical so we only document them once here. A is always used for address length encoding, and B for data.</p>
<p>The 2-bit value defines the number of bytes that follow the instruction for the specific type of value following.
When present the A value is transmitted first, then the B.</p>
<p>The following table defines the possible bit values and their meanings:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Value</p></th>
<th class="text-align:left head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>0 0</p></td>
<td class="text-align:left"><p>1 byte</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>0 1</p></td>
<td class="text-align:left"><p>2 bytes</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>1 0</p></td>
<td class="text-align:left"><p>3 bytes</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>1 1</p></td>
<td class="text-align:left"><p>4 bytes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pointer-rules">
<h3>Pointer Rules<a class="headerlink" href="#pointer-rules" title="Permalink to this headline">¶</a></h3>
<p>The pointer register and all access for it are encoded in the LD and ST instructions with the following form:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Value</p></th>
<th class="text-align:left head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>0 0</p></td>
<td class="text-align:left"><p>*ptr</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>0 1</p></td>
<td class="text-align:left"><p>*(ptr++)</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>1 0</p></td>
<td class="text-align:left"><p>ptr</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>1 1</p></td>
<td class="text-align:left"><p>ptr++ (reserved)</p></td>
</tr>
</tbody>
</table>
<p><strong>NB</strong>: The pointer register is written to by all direct addressing instructions which is undocumented by the datasheets and has a profound impact on the instruction ordering that must be kept.</p>
</div>
<div class="section" id="pdi-registers">
<h3>PDI Registers<a class="headerlink" href="#pdi-registers" title="Permalink to this headline">¶</a></h3>
<p>The PDI “CPU” has 16 internal 8-bit registers.
Some of these are documented, others are “reserved” (they may actually be unused, but it’s unclear at this time if they are or if they’re not just additional special-function CSRs).
All of these registers are CSRs that define status for and control how debug and programming will run.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Register#</p></th>
<th class="text-align:left head"><p>Alias</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>0 0 0 0</p></td>
<td class="text-align:left"><p>status</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>0 0 0 1</p></td>
<td class="text-align:left"><p>reset</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>0 0 1 0</p></td>
<td class="text-align:left"><p>control</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>0 0 1 1</p></td>
<td class="text-align:left"><p>r3</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>0 1 0 0</p></td>
<td class="text-align:left"><p>r4</p></td>
</tr>
</tbody>
</table>
<p>The rest are “reserved”.</p>
<div class="section" id="status-register">
<h4>Status Register<a class="headerlink" href="#status-register" title="Permalink to this headline">¶</a></h4>
<p>The status register’s bits have the following meanings assigned to them:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>8</p></th>
<th class="text-align:center head"><p>7</p></th>
<th class="text-align:center head"><p>6</p></th>
<th class="text-align:center head"><p>5</p></th>
<th class="text-align:center head"><p>4</p></th>
<th class="text-align:center head"><p>3</p></th>
<th class="text-align:center head"><p>2</p></th>
<th class="text-align:center head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>DBGEN</p></td>
<td class="text-align:center"><p>NVMEN</p></td>
<td class="text-align:center"><p>-</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R/W</p></td>
<td class="text-align:center"><p>R/W</p></td>
<td class="text-align:center"><p>R</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
</tr>
</tbody>
</table>
<p>The bottom row defines the reset state of this register.</p>
<ul class="simple">
<li><p>NVMEN is the Flash/EEPROM Non-Voltile Memory access enable</p></li>
<li><p>DBGEN is the debugger PDI component enable</p></li>
</ul>
<p>These bits cannot be written high - this operation is acomplished using the key instruction.
Writing a 0 to an enable bit disables that specific function, writing a 1 preserves its current state.</p>
</div>
<div class="section" id="reset-register">
<h4>Reset Register<a class="headerlink" href="#reset-register" title="Permalink to this headline">¶</a></h4>
<p>The reset register is both a control and status register. It has two meanings.</p>
<p>As a control register (write) it means:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>8</p></th>
<th class="text-align:center head"><p>7</p></th>
<th class="text-align:center head"><p>6</p></th>
<th class="text-align:center head"><p>5</p></th>
<th class="text-align:center head"><p>4</p></th>
<th class="text-align:center head"><p>3</p></th>
<th class="text-align:center head"><p>2</p></th>
<th class="text-align:center head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>RESET</p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>R/W</p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
</tr>
</tbody>
</table>
<p>As a status register (read) it means:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>8</p></th>
<th class="text-align:center head"><p>7</p></th>
<th class="text-align:center head"><p>6</p></th>
<th class="text-align:center head"><p>5</p></th>
<th class="text-align:center head"><p>4</p></th>
<th class="text-align:center head"><p>3</p></th>
<th class="text-align:center head"><p>2</p></th>
<th class="text-align:center head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>RESET</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R/W</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
</tr>
</tbody>
</table>
<p>Writing 0x59 to this register puts the device in reset, with a caviat as given below.
Writing to a value other than this (such as 0) takes the device back out of reset.</p>
<p>When DBGEN is 1 in the status register, the operation of this register is modified to, instead of causing a full reset, only cause a device halt. This is how pause/resume is acomplished in combination with r3/r4.
When not held in reset-pause by this register, it is still possible for the main CPU to not be running as a result of r3/r4 state. This is covered in their documentation sections.</p>
</div>
<div class="section" id="control-register">
<h4>Control Register<a class="headerlink" href="#control-register" title="Permalink to this headline">¶</a></h4>
<p>This control register is used to control turn-around timings for the <span class="xref myst">native physical protocol</span>.
The register’s bits have the following meanings assigned to them:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>8</p></th>
<th class="text-align:center head"><p>7</p></th>
<th class="text-align:center head"><p>6</p></th>
<th class="text-align:center head"><p>5</p></th>
<th class="text-align:center head"><p>4</p></th>
<th class="text-align:center head"><p>3</p></th>
<th class="text-align:center head"><p>2</p></th>
<th class="text-align:center head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>GUARDTIME</p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R/W</p></td>
<td class="text-align:center"><p></p></td>
<td class="text-align:center"><p></p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>GUARDTIME specifies the number of idle bits of guard time inserted between PDI RX and TX direction changes. It defaults to 128 bits, and what the bits mean is determined by the table below:</p></li>
</ul>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>GUARDTIME</p></th>
<th class="text-align:left head"><p>number of idle bits</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>0 0 0</p></td>
<td class="text-align:left"><p>128</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>0 0 1</p></td>
<td class="text-align:left"><p>64</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>0 1 0</p></td>
<td class="text-align:left"><p>32</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>0 1 1</p></td>
<td class="text-align:left"><p>16</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>1 0 0</p></td>
<td class="text-align:left"><p>8</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>1 0 1</p></td>
<td class="text-align:left"><p>4</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>1 1 0</p></td>
<td class="text-align:left"><p>2</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>1 1 1</p></td>
<td class="text-align:left"><p>2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="register-r3">
<h4>Register r3<a class="headerlink" href="#register-r3" title="Permalink to this headline">¶</a></h4>
<p>This status regsiter indicates the current state of the debug engine when enabled (otherwise it reads as 0)</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>8</p></th>
<th class="text-align:center head"><p>7</p></th>
<th class="text-align:center head"><p>6</p></th>
<th class="text-align:center head"><p>5</p></th>
<th class="text-align:center head"><p>4</p></th>
<th class="text-align:center head"><p>3</p></th>
<th class="text-align:center head"><p>2</p></th>
<th class="text-align:center head"><p>1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>RESET</p></td>
<td class="text-align:center"><p>PAUSE</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
<td class="text-align:center"><p>-</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
<td class="text-align:center"><p>R</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p>0</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>The RESET bit indicates whether the processor is currently held in reset and is sort-of a duplicate of the RESET bit from the reset CSR.</p></li>
<li><p>The PAUSE bit indicates whether the processor is currently held in execution pause.</p></li>
</ul>
</div>
<div class="section" id="register-r4">
<h4>Register r4<a class="headerlink" href="#register-r4" title="Permalink to this headline">¶</a></h4>
</div>
</div>
</div>
<div class="section" id="native-pdi-protocol">
<h2>Native PDI protocol<a class="headerlink" href="#native-pdi-protocol" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="jtag-pdi-protocol">
<h2>JTAG-PDI protocol<a class="headerlink" href="#jtag-pdi-protocol" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="memory.html" class="btn btn-neutral float-right" title="Memory Map" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Tempest JTAG-PDI RE project" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Tempest Contributors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>